<?php
/**
 * Copyright Â© Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */

// phpcs:disable Magento2.Templates.ThisInTemplate.FoundThis

/**
 * Product view template
 *
 * @var $block \Magento\Catalog\Block\Product\View
 */

$productBlock= $block->getLayout()->createBlock('Postpay\Payment\Block\Widget\Product');

?>
<?php $_helper = $this->helper(Magento\Catalog\Helper\Output::class); ?>
<?php $_product = $block->getProduct(); ?>

<div class="product-add-form">
    <form data-product-sku="<?= $block->escapeHtml($_product->getSku()) ?>"
          action="<?= $block->escapeUrl($block->getSubmitUrl($_product)) ?>" method="post"
          id="product_addtocart_form"<?php if ($_product->getOptions()) :?> enctype="multipart/form-data"<?php endif; ?>>
        <input type="hidden" name="product" value="<?= (int)$_product->getId() ?>" />
        <input type="hidden" name="selected_configurable_option" value="" />
        <input type="hidden" name="related_product" id="related-products-field" value="" />
        <input type="hidden" name="item"  value="<?= (int)$block->getRequest()->getParam('id') ?>" />
        <?= $block->getBlockHtml('formkey') ?>
        <?= $block->getChildHtml('form_top') ?>
        <?php if (!$block->hasOptions()) :?>
            <?= $block->getChildHtml('product_info_form_content') ?>
        <?php else :?>
            <?php if ($_product->isSaleable() && $block->getOptionsContainer() == 'container1') :?>
                <?= $block->getChildChildHtml('options_container') ?>
            <?php endif;?>
        <?php endif; ?>

        <?php if ($_product->isSaleable() && $block->hasOptions() && $block->getOptionsContainer() == 'container2') :?>
            <?= $block->getChildChildHtml('options_container') ?>
        <?php endif;?>
        <?= $block->getChildHtml('form_bottom') ?>
        <?php if ($productBlock->isOneEnabled()) : ?>
        <div class="single_add_to_cart_button disabled wc-variation-selection-needed">
            <div id="buyinone" class="postpay-widget-one postpay-one-locale-en">
                <input type="hidden" id="postpay-one" name="postpay-one" value="false">
                <button id="postpay-one-button" class="postpay-widget-one-container" onclick="One()">
                    <span class="postpay-widget-one-text">Buy in </span>
                    <svg xmlns="http://www.w3.org/2000/svg" width="67.315" height="31.326" viewBox="0 0 67.315 31.326">
                        <defs>
                            <linearGradient id="2xmlhbz1ba" y1=".5" x2="1" y2=".5" gradientUnits="objectBoundingBox">
                                <stop offset="0" stop-color="#00ffc1"></stop>
                                <stop offset=".03" stop-color="#00f4ca"></stop>
                                <stop offset=".11" stop-color="#00dbe1"></stop>
                                <stop offset=".19" stop-color="#00c9f2"></stop>
                                <stop offset=".27" stop-color="#00bffb"></stop>
                                <stop offset=".38" stop-color="#00bcff"></stop>
                                <stop offset=".62" stop-color="#a63aff"></stop>
                                <stop offset=".82" stop-color="#ff3dbe"></stop>
                            </linearGradient>
                        </defs>
                        <g data-name="Group 9045">
                            <path data-name="Path 4564" d="M6114.76 566.52h-40.291a11.462 11.462 0 0 1-11.489-11.435 11.462 11.462 0 0 1 11.489-11.435h40.291a11.178 11.178 0 0 1 11.152 11.435 11.178 11.178 0 0 1-11.152 11.435z" transform="translate(-6060.853 -542.52)" style="fill:url(#2xmlhbz1ba)"></path>
                            <g data-name="Group 8975">
                                <path data-name="Path 4565" d="M57.658 8.191a3.9 3.9 0 0 0-2.647-.916 3.734 3.734 0 0 0-2.558.883 3.919 3.919 0 0 0-1.288 2.506h7.55a3.1 3.1 0 0 0-1.058-2.47z"></path>
                                <path data-name="Path 4566" d="M12.654 7.663a3.825 3.825 0 0 0-2.926 1.251 6.322 6.322 0 0 0-.016 7.284 3.706 3.706 0 0 0 2.873 1.271 3.928 3.928 0 0 0 2.946-1.271 5.041 5.041 0 0 0 1.218-3.632 5.129 5.129 0 0 0-1.182-3.632 3.816 3.816 0 0 0-2.91-1.271z"></path>
                            </g>
                            <g data-name="Group 8977">
                                <g data-name="Group 8976">
                                    <path data-name="Path 4567" d="M32.424 26.669a1.421 1.421 0 0 1 .722-.181 1.5 1.5 0 0 1 .782.207 1.449 1.449 0 0 1 .545.578 1.8 1.8 0 0 1 .2.867 1.833 1.833 0 0 1-.2.87 1.457 1.457 0 0 1-1.327.8 1.415 1.415 0 0 1-.732-.181 1.232 1.232 0 0 1-.473-.463v.594h-.535v-4.342h.535v1.727a1.255 1.255 0 0 1 .483-.47zm1.557.834a1 1 0 0 0-.4-.41 1.084 1.084 0 0 0-.548-.141 1.054 1.054 0 0 0-.542.145 1.067 1.067 0 0 0-.4.417 1.4 1.4 0 0 0 0 1.268 1.041 1.041 0 0 0 .4.417 1.08 1.08 0 0 0 .542.144 1.1 1.1 0 0 0 .548-.144 1.061 1.061 0 0 0 .4-.417 1.335 1.335 0 0 0 .148-.644 1.29 1.29 0 0 0-.149-.63z"></path>
                                    <path data-name="Path 4568" d="m38.15 26.541-1.937 4.735h-.552l.634-1.55-1.3-3.185h.595l1.012 2.607 1-2.607h.552z"></path>
                                    <path data-name="Path 4569" d="M41.575 26.577a1.226 1.226 0 0 1 .6-.141 1.36 1.36 0 0 1 .736.207 1.4 1.4 0 0 1 .519.588 2.167 2.167 0 0 1 0 1.777 1.482 1.482 0 0 1-.519.594 1.354 1.354 0 0 1-.736.21 1.229 1.229 0 0 1-.6-.141 1.1 1.1 0 0 1-.407-.365v2.02h-1v-4.841h1v.463a1.1 1.1 0 0 1 .407-.371zm.821.949a.717.717 0 0 0-1.024 0 .946.946 0 0 0 0 1.189.706.706 0 0 0 1.021 0 .825.825 0 0 0 .21-.6.8.8 0 0 0-.21-.591z"></path>
                                    <path data-name="Path 4570" d="M44.78 29.602a1.486 1.486 0 0 1-.6-.588 1.9 1.9 0 0 1 0-1.783 1.509 1.509 0 0 1 .61-.591 1.934 1.934 0 0 1 1.741 0 1.514 1.514 0 0 1 .611.591 1.75 1.75 0 0 1 .223.89 1.718 1.718 0 0 1-.227.89 1.548 1.548 0 0 1-.617.591 1.834 1.834 0 0 1-.874.207 1.8 1.8 0 0 1-.867-.207zm1.356-.877a.84.84 0 0 0 .2-.6.853.853 0 0 0-.2-.6.635.635 0 0 0-.486-.21.641.641 0 0 0-.489.21 1.051 1.051 0 0 0 0 1.212.616.616 0 0 0 .479.21.658.658 0 0 0 .489-.21z"></path>
                                    <path data-name="Path 4571" d="M48.469 29.661a1.324 1.324 0 0 1-.529-.4 1.077 1.077 0 0 1-.217-.575h.992a.387.387 0 0 0 .158.276.577.577 0 0 0 .348.105.5.5 0 0 0 .292-.072.222.222 0 0 0 .1-.19.215.215 0 0 0-.147-.207 2.957 2.957 0 0 0-.477-.151 4.346 4.346 0 0 1-.588-.174.981.981 0 0 1-.4-.289.78.78 0 0 1-.171-.532.929.929 0 0 1 .155-.516 1.062 1.062 0 0 1 .459-.368 1.767 1.767 0 0 1 .719-.135 1.444 1.444 0 0 1 .972.305 1.178 1.178 0 0 1 .407.811h-.929a.393.393 0 0 0-.151-.269.524.524 0 0 0-.332-.1.445.445 0 0 0-.269.069.223.223 0 0 0 .056.394 2.381 2.381 0 0 0 .466.141 5.509 5.509 0 0 1 .594.184 1.021 1.021 0 0 1 .4.292.845.845 0 0 1 .18.542.858.858 0 0 1-.161.516 1.067 1.067 0 0 1-.463.355 1.789 1.789 0 0 1-.7.128 1.884 1.884 0 0 1-.766-.148z"></path>
                                    <path data-name="Path 4572" d="M53.004 28.909v.851h-.512a1.25 1.25 0 0 1-.851-.266 1.105 1.105 0 0 1-.306-.874v-1.3h-.4v-.834h.4v-.8h1.005v.8h.656v.834h-.656v1.317a.275.275 0 0 0 .068.21.347.347 0 0 0 .237.066h.358z"></path>
                                    <path data-name="Path 4573" d="M54.974 26.577a1.227 1.227 0 0 1 .6-.141 1.358 1.358 0 0 1 .735.207 1.394 1.394 0 0 1 .519.588 2.167 2.167 0 0 1 0 1.777 1.482 1.482 0 0 1-.519.594 1.353 1.353 0 0 1-.735.21 1.233 1.233 0 0 1-.6-.141 1.1 1.1 0 0 1-.407-.365v2.02h-1v-4.841h1v.463a1.1 1.1 0 0 1 .407-.371zm.821.949a.685.685 0 0 0-.516-.213.676.676 0 0 0-.509.217.945.945 0 0 0 0 1.189.706.706 0 0 0 1.021 0 .825.825 0 0 0 .21-.6.8.8 0 0 0-.21-.591z"></path>
                                    <path data-name="Path 4574" d="M57.545 27.228a1.44 1.44 0 0 1 .519-.588 1.353 1.353 0 0 1 .736-.207 1.248 1.248 0 0 1 .607.141 1.047 1.047 0 0 1 .4.371v-.463h1v3.277h-1v-.463a1.11 1.11 0 0 1-.407.371 1.246 1.246 0 0 1-.607.141 1.321 1.321 0 0 1-.729-.21 1.415 1.415 0 0 1-.519-.594 1.963 1.963 0 0 1-.19-.89 1.94 1.94 0 0 1 .19-.887zm2.056.3a.678.678 0 0 0-.509-.217.692.692 0 0 0-.509.213.8.8 0 0 0-.21.591.825.825 0 0 0 .21.6.674.674 0 0 0 .509.22.684.684 0 0 0 .509-.217.946.946 0 0 0 0-1.189z"></path>
                                    <path data-name="Path 4575" d="m64.893 26.482-2.056 4.837h-1.08l.752-1.668-1.333-3.166h1.117l.759 2.049.752-2.049h1.087z"></path>
                                </g>
                                <path data-name="Path 4576" d="M54.963 0H12.35a12.351 12.351 0 1 0 0 24.7h42.613a12.351 12.351 0 1 0 0-24.7zm-33.44 17.717a9.179 9.179 0 0 1-3.7 3.543 11.056 11.056 0 0 1-5.238 1.235 10.85 10.85 0 0 1-5.2-1.235 9.042 9.042 0 0 1-3.632-3.527A10.555 10.555 0 0 1 2.43 12.37a10.391 10.391 0 0 1 1.34-5.343 9.067 9.067 0 0 1 3.668-3.543 11.658 11.658 0 0 1 10.443 0 9.109 9.109 0 0 1 3.668 3.543 10.451 10.451 0 0 1 1.34 5.343 10.335 10.335 0 0 1-1.359 5.343zm8.837-14.67v19.165h-6.033V7.038l-1.806.43V4.214l2.023-.516 5.816-1.5v.847zm13.543 19.165h-6V11.527a4.325 4.325 0 0 0-1.021-3.067 4.029 4.029 0 0 0-5.4-.112V3.934a6.88 6.88 0 0 1 1.337-.854 7.839 7.839 0 0 1 3.491-.759 7.138 7.138 0 0 1 5.52 2.24 8.733 8.733 0 0 1 2.063 6.154v11.5zm8.414-5.589a3.608 3.608 0 0 0 2.558.969 3.169 3.169 0 0 0 3.14-1.9h6.42a8.807 8.807 0 0 1-1.78 3.491 8.909 8.909 0 0 1-3.229 2.433 10.363 10.363 0 0 1-4.338.883 10.542 10.542 0 0 1-5.149-1.235 8.807 8.807 0 0 1-3.527-3.527 10.884 10.884 0 0 1-1.271-5.363 11.032 11.032 0 0 1 1.251-5.363 8.669 8.669 0 0 1 3.511-3.527 10.61 10.61 0 0 1 5.186-1.235 10.408 10.408 0 0 1 5.08 1.2 8.622 8.622 0 0 1 3.475 3.422 10.389 10.389 0 0 1 1.251 5.185 15.766 15.766 0 0 1-.1 1.764H51.144a4.112 4.112 0 0 0 1.182 2.8z"></path>
                            </g>
                        </g>
                    </svg>
                </button>
                <div class="postpay-widget-one-caption">
                    <div class="postpay-one-caption-text">Skip checkout. Pay now or in instalments with </div>
                    <div class="postpay-logo-wrapper">
                        <svg class="postpay-logo-svg" id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="-0.01 -0.01 1721.43 245.68">
                            <defs>
                                <style>.cls-1 {fill: #3ebbd2;}</style>
                            </defs>
                            <g>
                                <path class="cls-1" d="M851.71,41.32H817.2c-2.58,0-4,1.73-4.31,4.31v15c-9.48-12.08-19-19.3-36.79-19.3-39.39,0-68.17,31.66-68.17,72.79,0,40.26,28.76,70.94,68.15,70.94,18.4,0,27.9-6.24,36.81-17.17v12.85c.28,2.59,1.73,4.32,4.31,4.32h34.51a4.08,4.08,0,0,0,4.31-4.32V45.63A4.07,4.07,0,0,0,851.71,41.32ZM781.26,146.9c-18.41,0-31.92-13.52-31.92-33.07,0-20.13,13.51-33.93,31.92-33.93,19,0,31.63,14.95,31.63,33.93C812.89,133.1,800.24,146.9,781.26,146.9Z"></path>
                                <path class="cls-1" d="M80,41.33c-17.83,0-27.22,7-36.72,19.06V45.64c-.28-2.58-1.72-4.31-4.31-4.31H4.31A4.08,4.08,0,0,0,0,45.64V241.35a4.07,4.07,0,0,0,4.31,4.31H38.83a4.07,4.07,0,0,0,4.31-4.31v-70c8.62,8.92,20.7,13.67,36.81,13.67,39.39,0,68.15-30.93,68.15-71.19C148.1,72.75,119.34,41.33,80,41.33ZM74.77,146.65c-19,0-31.63-13.79-31.63-33.07,0-19,12.66-33.92,31.63-33.92,18.4,0,31.92,13.8,31.92,33.92C106.69,133.14,93.17,146.65,74.77,146.65Z"></path>
                                <path class="cls-1" d="M627.32,41.33c-17.83,0-27.22,7-36.71,19.06V45.64c-.29-2.58-1.73-4.31-4.32-4.31h-34.6a4.08,4.08,0,0,0-4.32,4.31V241.35a4.08,4.08,0,0,0,4.32,4.31H586.2a4.07,4.07,0,0,0,4.31-4.31v-70c8.63,8.92,20.7,13.67,36.81,13.67,39.4,0,68.15-30.93,68.15-71.19C695.47,72.75,666.72,41.33,627.32,41.33Zm-5.17,105.32c-19,0-31.64-13.79-31.64-33.07,0-19,12.66-33.92,31.64-33.92,18.4,0,31.91,13.8,31.91,33.92C654.06,133.14,640.55,146.65,622.15,146.65Z"></path>
                                <path class="cls-1" d="M233.89,41.33c-40.55,0-73.33,31.14-73.33,72.25,0,40.84,32.78,71.48,73.33,71.48,40.83,0,73.61-30.64,73.61-71.48C307.5,72.47,274.72,41.33,233.89,41.33Zm0,105.61c-17.55,0-31.93-14.08-31.93-33.36,0-19.55,14.38-33.64,31.93-33.64,17.82,0,31.91,14.09,31.91,33.64C265.8,132.86,251.71,146.94,233.89,146.94Z"></path>
                                <path class="cls-1" d="M365.36,84c0-4.89,4-9.78,12.65-9.78s14.66,3.45,25.6,9.78c2.58,1.72,4.6,2.58,6.32.28l12.94-17c1.44-1.73,2-4,.29-6-11.79-13.8-30.24-19.92-49.51-19.92-25.3,0-49.7,14.46-49.7,42.92,0,47.45,65,38.53,65,57.51,0,7.77-8.35,9.21-15,9.21-9.2,0-20.41-3.74-33.35-11.79-2.59-1.44-4.89-2-6.62,0l-12.64,18.41c-1.16,1.72-1.73,3.73,0,5.75,10.06,11.78,29.61,21.72,54.05,21.72,26.17,0,55.5-14,55.5-42.72C430.92,90.3,365.36,103.81,365.36,84Z"></path>
                                <path class="cls-1" d="M530.61,41.33h-23v-37A4.08,4.08,0,0,0,503.28,0h-34.5a4.08,4.08,0,0,0-4.32,4.31v37h-23a4.07,4.07,0,0,0-4.31,4.31V71.81a4.08,4.08,0,0,0,4.31,4.32h23V180.74a4.08,4.08,0,0,0,4.32,4.32h34.5a4.08,4.08,0,0,0,4.32-4.32V76.13h23a4.08,4.08,0,0,0,4.31-4.32V45.64A4.08,4.08,0,0,0,530.61,41.33Z"></path>
                                <path class="cls-1" d="M1017.58,41.33H982.21A5.27,5.27,0,0,0,977,44.78L944.7,133.43,912.29,44.78a5.26,5.26,0,0,0-5.17-3.45h-34.8c-3.16,0-4.6,1.73-3.45,4.89L924.3,185.06l-23.69,55.72c-1.72,3.16.3,4.88,3.46,4.88h33.64a5.28,5.28,0,0,0,5.18-3.45l78.14-196C1022.18,43.06,1020.75,41.33,1017.58,41.33Z"></path>
                            </g>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
        <?php endif; ?>
    </form>
</div>
<style>
.product-add-form {
    margin-bottom: 50px;
}
.postpay-widget-one {
  max-width: 351px !important;
  height: 54px !important;
  border: none !important;
  border-radius: 5px !important;
  padding: 0 !important;
  margin: 10px 0 !important;
}

.postpay-widget-one-container {
  width: 100% !important;
  height: 100% !important;
  border-radius: 5px !important;
  background-image: linear-gradient(to right, #00ffc1 0%, #00f3cb 9%, #00d6e6 25%, #00bcff 38%, #a63aff 67%, #ff3dbe 100%) !important;
  // animation: gradient 10s ease infinite;
  // background-size: 400% 400% !important;
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  cursor: pointer !important;
}

.postpay-widget-one-text {
  font-size: 20px !important;
  font-weight: 600 !important;
  color: #000 !important;
  margin-right: 5.2px !important;
  margin-bottom: 8px !important;
}

.postpay-widget-one-caption {
  text-align: center !important;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  color: #000 !important;
  font-size: 10px !important;
  margin-top: 5px !important;
}

.postpay-one-caption-text {
    margin-right: 4px;
}

.postpay-widget-one-caption a {
    color: #888888;
    text-decoration: underline;
}

.postpay-logo-wrapper {
	height: 14px!important;
}

@keyframes gradient {
	0% {
		background-position: 0% 50%;
	}
	50% {
		background-position: 100% 50%;
	}
	100% {
		background-position: 0% 50%;
	}
}
</style>
<script type="text/x-magento-init">
    {
        "[data-role=priceBox][data-price-box=product-id-<?= $block->escapeHtml($_product->getId()) ?>]": {
            "priceBox": {
                "priceConfig":  <?= /* @noEscape */ $block->getJsonConfig() ?>
            }
        }
    }
</script>
<script type="text/JavaScript">
    function One(){
        document.getElementById("postpay-one").value = "true";
    }
</script>
